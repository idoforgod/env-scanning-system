{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "pSRT 2.0 - predicted Signal Reliability Test",
  "description": "환경스캐닝 자체 신뢰 평가 척도 - AlphaFold pLDDT 영감의 4-Phase 시스템",
  "version": "2.0",
  "created": "2026-01-12",
  "updated": "2026-01-14",

  "definitions": {
    "score_range": {
      "type": "number",
      "minimum": 0,
      "maximum": 100
    },
    "confidence_score": {
      "type": "number",
      "minimum": 0,
      "maximum": 1
    },
    "grade": {
      "type": "string",
      "enum": ["A++", "A+", "A", "B", "C", "D", "E", "F"]
    },
    "groundedness_grade": {
      "type": "string",
      "enum": ["G++", "G+", "G", "G-", "P", "P-", "F"]
    },
    "cv_grade": {
      "type": "string",
      "enum": ["CV++", "CV+", "CV", "CV-", "P", "P-", "F"]
    },
    "calibration_grade": {
      "type": "string",
      "enum": ["CAL++", "CAL+", "CAL", "CAL-", "P", "P-"]
    },
    "confidence_level": {
      "type": "string",
      "enum": ["exceptional", "very_high", "high", "good", "moderate", "low", "very_low", "unreliable"]
    },
    "hallucination_type": {
      "type": "string",
      "enum": ["FABRICATION", "EXAGGERATION", "MISATTRIBUTION", "TEMPORAL_DISTORTION", "CAUSATION_INVENTION", "SCOPE_EXPANSION"]
    },
    "severity": {
      "type": "string",
      "enum": ["CRITICAL", "HIGH", "MEDIUM", "LOW"]
    },
    "match_type": {
      "type": "string",
      "enum": ["exact", "semantic", "partial", "entity_verified", "inference", "no_match"]
    },
    "consistency_type": {
      "type": "string",
      "enum": ["FULL_CONFIRMATION", "MAJORITY_CONFIRMATION", "PARTIAL_CONFIRMATION", "CONTRADICTION", "NO_CORROBORATION"]
    },
    "realization_status": {
      "type": "string",
      "enum": ["realized", "partially_realized", "not_realized", "contradicted", "unknown", "pending"]
    },
    "claim_type": {
      "type": "string",
      "enum": ["factual_claim", "numerical_claim", "quote_claim", "entity_claim", "causal_claim", "temporal_claim", "significance_claim"]
    }
  },

  "phase_1_groundedness_schema": {
    "type": "object",
    "description": "Phase 1: Groundedness Verification 결과 스키마",
    "properties": {
      "signal_id": {"type": "string"},
      "groundedness": {
        "type": "object",
        "properties": {
          "score": {"$ref": "#/definitions/score_range"},
          "grade": {"$ref": "#/definitions/groundedness_grade"},
          "ratio": {"$ref": "#/definitions/confidence_score"},
          "claim_analysis": {
            "type": "object",
            "properties": {
              "total_claims": {"type": "integer"},
              "grounded": {"type": "integer"},
              "ungrounded": {"type": "integer"},
              "breakdown": {
                "type": "object",
                "properties": {
                  "exact_match": {"type": "integer"},
                  "semantic_match": {"type": "integer"},
                  "partial_match": {"type": "integer"},
                  "entity_verified": {"type": "integer"},
                  "inference": {"type": "integer"},
                  "no_match": {"type": "integer"}
                }
              }
            }
          },
          "claim_mappings": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "claim_id": {"type": "string"},
                "claim_text": {"type": "string"},
                "claim_type": {"$ref": "#/definitions/claim_type"},
                "evidence": {"type": ["string", "null"]},
                "match_type": {"$ref": "#/definitions/match_type"},
                "confidence": {"$ref": "#/definitions/confidence_score"},
                "flag": {
                  "type": "object",
                  "properties": {
                    "type": {"$ref": "#/definitions/hallucination_type"},
                    "severity": {"$ref": "#/definitions/severity"},
                    "note": {"type": "string"}
                  }
                }
              }
            }
          },
          "hallucination_flags": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": {"$ref": "#/definitions/hallucination_type"},
                "severity": {"$ref": "#/definitions/severity"},
                "claim_id": {"type": "string"},
                "description": {"type": "string"},
                "recommended_action": {"type": "string"}
              }
            }
          }
        }
      }
    }
  },

  "phase_2_cross_validation_schema": {
    "type": "object",
    "description": "Phase 2: Cross-Validation 결과 스키마",
    "properties": {
      "signal_id": {"type": "string"},
      "cross_validation": {
        "type": "object",
        "properties": {
          "score": {"$ref": "#/definitions/score_range"},
          "grade": {"$ref": "#/definitions/cv_grade"},
          "pSRT_adjustment": {"type": "string"},
          "claims_validated": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "claim_id": {"type": "string"},
                "claim_text": {"type": "string"},
                "consistency": {
                  "type": "object",
                  "properties": {
                    "score": {"$ref": "#/definitions/score_range"},
                    "type": {"$ref": "#/definitions/consistency_type"},
                    "confirming_sources": {"type": "integer"},
                    "contradicting_sources": {"type": "integer"}
                  }
                },
                "independent_sources": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "url": {"type": "string", "format": "uri"},
                      "domain": {"type": "string"},
                      "tier": {"type": "integer", "minimum": 1, "maximum": 4},
                      "excerpt": {"type": "string"},
                      "verdict": {"type": "string", "enum": ["CONFIRMS", "CONTRADICTS", "NEUTRAL"]}
                    }
                  }
                },
                "contradiction_flag": {
                  "type": "object",
                  "properties": {
                    "type": {"type": "string"},
                    "severity": {"$ref": "#/definitions/severity"},
                    "original_value": {"type": "string"},
                    "contradicting_value": {"type": "string"},
                    "recommended_action": {"type": "string"}
                  }
                }
              }
            }
          },
          "source_diversity": {
            "type": "object",
            "properties": {
              "score": {"$ref": "#/definitions/score_range"},
              "unique_domains": {"type": "integer"},
              "tier_distribution": {
                "type": "object",
                "properties": {
                  "tier_1": {"type": "integer"},
                  "tier_2": {"type": "integer"},
                  "tier_3": {"type": "integer"},
                  "tier_4": {"type": "integer"}
                }
              },
              "language_diversity": {
                "type": "array",
                "items": {"type": "string"}
              }
            }
          }
        }
      }
    }
  },

  "phase_3_calibration_schema": {
    "type": "object",
    "description": "Phase 3: Historical Calibration 결과 스키마",
    "properties": {
      "signal_id": {"type": "string"},
      "calibration": {
        "type": "object",
        "properties": {
          "original_pSRT": {"$ref": "#/definitions/score_range"},
          "calibrated_pSRT": {"$ref": "#/definitions/score_range"},
          "adjustment": {"type": "string"},
          "grade": {"$ref": "#/definitions/calibration_grade"},
          "calibration_factor": {
            "type": "object",
            "properties": {
              "overall": {"type": "number", "minimum": 0.7, "maximum": 1.3},
              "similar_signal_factor": {"type": "number"},
              "source_factor": {"type": "number"},
              "topic_factor": {"type": "number"},
              "confidence": {"$ref": "#/definitions/confidence_score"}
            }
          },
          "similar_signals_used": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "signal_id": {"type": "string"},
                "similarity": {"$ref": "#/definitions/confidence_score"},
                "outcome": {"$ref": "#/definitions/realization_status"},
                "accuracy": {"$ref": "#/definitions/score_range"}
              }
            }
          },
          "source_history": {
            "type": "object",
            "properties": {
              "source": {"type": "string"},
              "historical_accuracy": {"$ref": "#/definitions/score_range"},
              "realization_rate": {"$ref": "#/definitions/confidence_score"},
              "sample_size": {"type": "integer"}
            }
          },
          "topic_history": {
            "type": "object",
            "properties": {
              "category": {"type": "string"},
              "subcategory": {"type": "string"},
              "historical_accuracy": {"$ref": "#/definitions/score_range"},
              "sample_size": {"type": "integer"}
            }
          }
        }
      }
    }
  },

  "phase_4_hallucination_schema": {
    "type": "object",
    "description": "Phase 4: Hallucination Detection 결과 스키마",
    "properties": {
      "signal_id": {"type": "string"},
      "hallucination_analysis": {
        "type": "object",
        "properties": {
          "status": {"type": "string", "enum": ["clean", "flags_detected"]},
          "total_flags": {"type": "integer"},
          "flags": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": {"$ref": "#/definitions/hallucination_type"},
                "severity": {"$ref": "#/definitions/severity"},
                "confidence": {"$ref": "#/definitions/confidence_score"},
                "claim": {"type": "string"},
                "evidence": {"type": "string"},
                "location": {"type": "string"},
                "recommended_action": {"type": "string"}
              }
            }
          },
          "pSRT_adjustments": {
            "type": "object",
            "properties": {
              "pre_adjustment": {"$ref": "#/definitions/score_range"},
              "hallucination_penalty": {"type": "number", "maximum": 0},
              "post_adjustment": {"$ref": "#/definitions/score_range"}
            }
          },
          "action_taken": {
            "type": "object",
            "properties": {
              "type": {"type": "string", "enum": ["none", "removed", "downgraded", "modified", "flagged_for_review"]},
              "details": {"type": "string"},
              "requires_manual_review": {"type": "boolean"}
            }
          }
        }
      }
    }
  },

  "final_pSRT_schema": {
    "type": "object",
    "description": "pSRT 2.0 최종 점수 스키마 (4 Phase 통합)",
    "properties": {
      "signal_id": {"type": "string"},
      "title": {"type": "string"},
      "final_pSRT": {
        "type": "object",
        "properties": {
          "score": {"$ref": "#/definitions/score_range"},
          "grade": {"$ref": "#/definitions/grade"},
          "confidence_level": {"$ref": "#/definitions/confidence_level"},
          "breakdown": {
            "type": "object",
            "properties": {
              "base_pSRT": {"$ref": "#/definitions/score_range"},
              "groundedness": {"$ref": "#/definitions/score_range"},
              "cross_validation": {"$ref": "#/definitions/score_range"},
              "calibration_factor": {"type": "number"},
              "hallucination_penalty": {"type": "number"}
            }
          },
          "phase_grades": {
            "type": "object",
            "properties": {
              "groundedness": {"$ref": "#/definitions/groundedness_grade"},
              "cross_validation": {"$ref": "#/definitions/cv_grade"},
              "calibration": {"$ref": "#/definitions/calibration_grade"},
              "hallucination_flags": {"type": "integer"}
            }
          },
          "reliability_statement": {"type": "string"},
          "recommended_action": {"type": "string"}
        }
      }
    }
  },

  "hallucination_types_v2": {
    "FABRICATION": {
      "description": "summary에 있지만 original_content에 전혀 없는 내용",
      "detection_criteria": [
        "groundedness.match_type == no_match",
        "claim_type in [factual, numerical, quote]",
        "cross_validation.confirming_sources == 0"
      ],
      "default_severity": "CRITICAL",
      "penalty": -30,
      "action": "제거/수동검토"
    },
    "EXAGGERATION": {
      "description": "원본의 내용을 과장하여 표현",
      "detection_criteria": [
        "groundedness.match_type == partial",
        "magnitude_comparison > 1.5",
        "hedging_removed == true"
      ],
      "default_severity": "HIGH",
      "penalty": -15,
      "action": "수정 필수"
    },
    "MISATTRIBUTION": {
      "description": "발언/행동을 잘못된 주체에게 귀속",
      "detection_criteria": [
        "entity_in_summary not in original_entities",
        "quote_attribution mismatch"
      ],
      "default_severity": "CRITICAL",
      "penalty": -25,
      "action": "제거/수동검토"
    },
    "TEMPORAL_DISTORTION": {
      "description": "시간/날짜 정보를 잘못 표현",
      "detection_criteria": [
        "date_in_summary != date_in_original",
        "tense_mismatch == true",
        "'최근' used for >30 days old"
      ],
      "default_severity": "HIGH",
      "penalty": -15,
      "action": "수정 필수"
    },
    "CAUSATION_INVENTION": {
      "description": "원본에 없는 인과관계를 추가",
      "detection_criteria": [
        "causal_words in summary",
        "causal_relationship not in original"
      ],
      "default_severity": "MEDIUM",
      "penalty": -10,
      "action": "수정 권고"
    },
    "SCOPE_EXPANSION": {
      "description": "원본의 범위를 임의로 확대",
      "detection_criteria": [
        "scope_in_summary > scope_in_original",
        "'일부' → '전체' 변환"
      ],
      "default_severity": "MEDIUM",
      "penalty": -10,
      "action": "수정 권고"
    }
  },

  "report_pSRT_schema": {
    "type": "object",
    "description": "보고서 레벨 pSRT 2.0 스키마",
    "properties": {
      "report_date": {"type": "string", "format": "date"},
      "version": {"type": "string"},
      "report_pSRT": {
        "type": "object",
        "properties": {
          "overall": {"$ref": "#/definitions/score_range"},
          "grade": {"$ref": "#/definitions/grade"},
          "confidence_level": {"$ref": "#/definitions/confidence_level"},
          "breakdown": {
            "type": "object",
            "properties": {
              "avg_groundedness": {"$ref": "#/definitions/score_range"},
              "avg_cross_validation": {"$ref": "#/definitions/score_range"},
              "avg_calibration_factor": {"type": "number"},
              "source_diversity": {"$ref": "#/definitions/score_range"},
              "internal_consistency": {"$ref": "#/definitions/score_range"}
            }
          },
          "signal_distribution": {
            "type": "object",
            "properties": {
              "A_plus_plus_grade": {"type": "integer"},
              "A_plus_grade": {"type": "integer"},
              "A_grade": {"type": "integer"},
              "B_grade": {"type": "integer"},
              "C_grade": {"type": "integer"},
              "D_grade": {"type": "integer"},
              "E_grade": {"type": "integer"},
              "F_grade": {"type": "integer"}
            }
          },
          "hallucination_summary": {
            "type": "object",
            "properties": {
              "total_flags": {"type": "integer"},
              "by_type": {
                "type": "object",
                "properties": {
                  "FABRICATION": {"type": "integer"},
                  "EXAGGERATION": {"type": "integer"},
                  "MISATTRIBUTION": {"type": "integer"},
                  "TEMPORAL_DISTORTION": {"type": "integer"},
                  "CAUSATION_INVENTION": {"type": "integer"},
                  "SCOPE_EXPANSION": {"type": "integer"}
                }
              },
              "by_severity": {
                "type": "object",
                "properties": {
                  "CRITICAL": {"type": "integer"},
                  "HIGH": {"type": "integer"},
                  "MEDIUM": {"type": "integer"},
                  "LOW": {"type": "integer"}
                }
              }
            }
          },
          "system_health": {
            "type": "object",
            "properties": {
              "hallucination_rate": {"type": "string"},
              "critical_rate": {"type": "string"},
              "trend_vs_yesterday": {"type": "string"},
              "trend_vs_last_week": {"type": "string"}
            }
          },
          "reliability_statement": {"type": "string"}
        }
      }
    }
  },

  "grade_thresholds_v2": {
    "A_plus_plus": {"min": 95, "max": 100, "label": "Exceptional", "action": "즉시 활용, 높은 신뢰"},
    "A_plus": {"min": 90, "max": 94, "label": "Very High", "action": "즉시 활용 가능"},
    "A": {"min": 80, "max": 89, "label": "High", "action": "활용 권장"},
    "B": {"min": 70, "max": 79, "label": "Good", "action": "활용 가능, 모니터링 권장"},
    "C": {"min": 60, "max": 69, "label": "Moderate", "action": "추가 검증 후 활용"},
    "D": {"min": 50, "max": 59, "label": "Low", "action": "교차 검증 필수"},
    "E": {"min": 40, "max": 49, "label": "Very Low", "action": "참고용으로만 사용"},
    "F": {"min": 0, "max": 39, "label": "Unreliable", "action": "제외 권고"}
  }
}
