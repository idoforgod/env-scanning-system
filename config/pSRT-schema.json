{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "pSRT - predicted Signal Reliability Test",
  "description": "환경스캐닝 자체 신뢰 평가 척도 데이터 구조",
  "version": "1.0",
  "created": "2026-01-12",

  "definitions": {
    "score_range": {
      "type": "number",
      "minimum": 0,
      "maximum": 100
    },
    "grade": {
      "type": "string",
      "enum": ["A+", "A", "B", "C", "D", "E", "F"]
    },
    "confidence_level": {
      "type": "string",
      "enum": ["very_high", "high", "good", "moderate", "low", "very_low", "unreliable"]
    },
    "flag_severity": {
      "type": "string",
      "enum": ["critical", "high", "medium", "low", "info"]
    },
    "flag_action": {
      "type": "string",
      "enum": ["remove", "verify", "downgrade", "verify_date", "monitor", "review"]
    }
  },

  "signal_pSRT_schema": {
    "type": "object",
    "properties": {
      "signal_id": {"type": "string"},
      "title": {"type": "string"},
      "pSRT": {
        "type": "object",
        "properties": {
          "overall": {"$ref": "#/definitions/score_range"},
          "grade": {"$ref": "#/definitions/grade"},
          "confidence_level": {"$ref": "#/definitions/confidence_level"},
          "breakdown": {
            "type": "object",
            "properties": {
              "source": {
                "type": "object",
                "properties": {
                  "score": {"$ref": "#/definitions/score_range"},
                  "authority": {"$ref": "#/definitions/score_range"},
                  "verifiability": {"$ref": "#/definitions/score_range"},
                  "historical_accuracy": {"$ref": "#/definitions/score_range"},
                  "cross_validation": {"$ref": "#/definitions/score_range"}
                }
              },
              "signal": {
                "type": "object",
                "properties": {
                  "score": {"$ref": "#/definitions/score_range"},
                  "specificity": {"$ref": "#/definitions/score_range"},
                  "freshness": {"$ref": "#/definitions/score_range"},
                  "independence": {"$ref": "#/definitions/score_range"},
                  "measurability": {"$ref": "#/definitions/score_range"},
                  "pattern_fit": {"$ref": "#/definitions/score_range"}
                }
              },
              "analysis": {
                "type": "object",
                "properties": {
                  "score": {"$ref": "#/definitions/score_range"},
                  "classification_clarity": {"$ref": "#/definitions/score_range"},
                  "impact_evidence": {"$ref": "#/definitions/score_range"},
                  "priority_consistency": {"$ref": "#/definitions/score_range"},
                  "comparative_validation": {"$ref": "#/definitions/score_range"}
                }
              }
            }
          },
          "flags": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "type": {"type": "string"},
                "severity": {"$ref": "#/definitions/flag_severity"},
                "action": {"$ref": "#/definitions/flag_action"},
                "description": {"type": "string"}
              }
            }
          },
          "recommended_action": {"type": "string"},
          "reliability_note": {"type": "string"}
        }
      }
    }
  },

  "report_pSRT_schema": {
    "type": "object",
    "properties": {
      "report_date": {"type": "string", "format": "date"},
      "report_pSRT": {
        "type": "object",
        "properties": {
          "overall": {"$ref": "#/definitions/score_range"},
          "grade": {"$ref": "#/definitions/grade"},
          "breakdown": {
            "type": "object",
            "properties": {
              "avg_signal_pSRT": {"$ref": "#/definitions/score_range"},
              "source_diversity": {"$ref": "#/definitions/score_range"},
              "internal_consistency": {"$ref": "#/definitions/score_range"},
              "coverage_balance": {"$ref": "#/definitions/score_range"}
            }
          },
          "signal_distribution": {
            "type": "object",
            "properties": {
              "A_plus_grade": {"type": "integer"},
              "A_grade": {"type": "integer"},
              "B_grade": {"type": "integer"},
              "C_grade": {"type": "integer"},
              "D_grade": {"type": "integer"},
              "E_grade": {"type": "integer"},
              "F_grade": {"type": "integer"}
            }
          },
          "hallucination_summary": {
            "type": "object",
            "properties": {
              "total_flags": {"type": "integer"},
              "critical": {"type": "integer"},
              "high": {"type": "integer"},
              "medium": {"type": "integer"},
              "low": {"type": "integer"}
            }
          },
          "reliability_statement": {"type": "string"}
        }
      }
    }
  },

  "hallucination_flag_types": {
    "SOURCE_HALLUCINATION": {
      "description": "존재하지 않거나 검증 불가능한 소스 인용",
      "detection": "URL 404, 소스 검증 실패",
      "default_severity": "critical",
      "default_action": "remove"
    },
    "SIGNAL_FABRICATION_RISK": {
      "description": "구체성과 독립성이 모두 낮아 날조 가능성",
      "detection": "specificity < 30 AND independence < 40",
      "default_severity": "high",
      "default_action": "verify"
    },
    "OVERINTERPRETATION": {
      "description": "근거 대비 중요도가 과대평가됨",
      "detection": "significance >= 4 AND impact_evidence < 40",
      "default_severity": "medium",
      "default_action": "downgrade"
    },
    "TEMPORAL_CONFUSION": {
      "description": "오래된 정보를 최신으로 잘못 표시",
      "detection": "freshness < 30",
      "default_severity": "medium",
      "default_action": "verify_date"
    },
    "VAGUE_SIGNAL": {
      "description": "구체적 정보 없이 모호한 신호",
      "detection": "specificity < 30",
      "default_severity": "medium",
      "default_action": "verify"
    },
    "DUPLICATE_RISK": {
      "description": "다른 신호의 재탕 가능성",
      "detection": "independence < 30",
      "default_severity": "low",
      "default_action": "review"
    },
    "LOW_SOURCE_QUALITY": {
      "description": "저품질 소스에서 고중요도 신호",
      "detection": "source_score < 50 AND significance >= 4",
      "default_severity": "medium",
      "default_action": "verify"
    },
    "INCONSISTENT_ANALYSIS": {
      "description": "분석 지표 간 불일치",
      "detection": "priority_consistency < 40",
      "default_severity": "low",
      "default_action": "review"
    }
  },

  "grade_thresholds": {
    "A_plus": {"min": 90, "max": 100, "label": "Very High", "action": "즉시 활용 가능"},
    "A": {"min": 80, "max": 89, "label": "High", "action": "활용 권장"},
    "B": {"min": 70, "max": 79, "label": "Good", "action": "활용 가능, 모니터링 권장"},
    "C": {"min": 60, "max": 69, "label": "Moderate", "action": "추가 검증 후 활용"},
    "D": {"min": 50, "max": 59, "label": "Low", "action": "교차 검증 필수"},
    "E": {"min": 40, "max": 49, "label": "Very Low", "action": "참고용으로만 사용"},
    "F": {"min": 0, "max": 39, "label": "Unreliable", "action": "제외 권고"}
  },

  "auto_action_thresholds": {
    "exclude_from_report": 40,
    "mark_as_reference_only": 50,
    "require_verification": 60,
    "auto_approve_report": 70
  }
}
